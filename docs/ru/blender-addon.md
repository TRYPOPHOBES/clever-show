# Аддон для экспорта анимации из Blender

Аддон для Blender предназначен для преобразования анимации полёта коптеров, нарисованной в Blender, в полётные пути для каждого коптера анимации, с учётом цвета объектов в каждый момент времени.

## Установка и настройка

* Скачайте и установите согласно инструкциям последнюю версию Blender 2.8 с [оффициального сайта](https://www.blender.org/download/).
* Откройте Blender, в верхнем меню выберите `Edit > Preferences`. В открывшемся окне настроек в боковой панели выберите пункт `Add-ons`. Нажмите на кнопку `Install...` в правом верхнем углу окна. В диалоговом окне откройте путь к папке с аддоном [clever-show/blender-addon](../../blender-addon/) и выберите файл `addon.py`. Нажмите `Install Add-on from file...`. Аддон установлен.
* После установки аддона поставьте "галочку" напротив аддона `Import-Export: clever-show animation (.csv)` для активации аддона.

Аддон активирован и готов к работе. Выполнение этих операций не понадобится при дальнейших запусках Blender.

## Экпорт при помощи аддона
Цвет материала объекта будет экспортирован как цвет светодиодной полосы для каждого кадра. Название материала должно начинаться с `led_color`. Если материал использует ноды, то тип ноды материала должен быть Emmision или Diffuse.

Для вызова диалогового окна экспорта нажмите в верхнем меню `File > Export > clever-show animation (.csv)`. В открывшемся окне экспорта необходимо выбрать целевой путь экспорта и название папки, которую создаст аддон в процессе экспорта. В боковом меню доступна панель параметров экспорта:

* `Use name filter for objects` - чекбокс, определяет, будет ли использован фильтр объектов при сохранении их путей. При отключении этого параметра будут экспортированы пути всех видимых объектов.
* `Name identifier` - фильтр имён объектов. Если активен чекбокс `Use name filter for objects`, будут сохранены только пути объектов, содержащих данное значение в названии.
* `Show detailed animation warnings` - чекбокс, определяет, будут ли показаны предупреждения по превышению скоростей и расстояний в анимации.
* `Speed limit` - при нарушении указанного ограничения по скорости передвижения дронов будут выведены предупреждения.
* `Distance limit` - при нарушении указанной минимальной дистанции между дронами будут выведены предупреждения.

После настройки нужных параметров нажмите кнопку `Export clever-show animation`. В указанную папку экспортируются анимации указанных объектов из проекта Blender в формате `.csv`.

## Деактивация и удаление

Для деактивации аддона уберите "галочку" напротив имени аддона, как описано [выше](#установка-и-настройка).

Для получения дополнительных сведений нажмите знак стрелочки слева от поля активации. В развернувшемся блоке так же есть кнопки:

* `Documentation` - ведет на страницу документации аддона
* `Report a bug` - ведет на страницу issues репозитория clever-show
* `Remove` - удаляет аддон (перед установкой новой версии рекомендуется удалить старую)
